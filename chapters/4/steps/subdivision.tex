\section{Induce subdivision}

The goal of subdividing $N$ is to create and identify analogues to the face, edge, and vertex blocks of Chapter \ref{chapter:smooth} where we may iteratively attach 2--, 3--, then 4-- handles.
We use a similar technique to that found in Chapter \ref{chapter:smooth}, iteratively subdividing the tetrahedra of $N$.
Tetrahedron subdivisions are compatible, i.e.\ tetrahedron subdivisions fit together exactly as the undivided tetrahedra do inside of $N$.

Let $\sigma$ be a tetrahedron of $N$.
If $e$ is an edge of $N^1\setminus\sigma^1$ such that $f(e)\cap f(\sigma)$ is nonempty, then $f(e)\cap f(\sigma)$ is a line segment in $f(\sigma)$ away from any vertices or crossings of $f(\sigma)$.
Figure \ref{fig:standard-position-intersection} demonstrates the possible configurations of these line segments, and shows that their preimages inside of $\sigma$ are triangles and quads.
We refer to these preimages as \emph{exterior triangles} and \emph{exterior quads}.
When a pair of these preimages intersect, the intersection is a line segment with endpoints interior to a pair of triangles of $\sigma^2$.

\begin{figure}[h!]
	\caption{
		\textbf{A tetrahedron $\sigma$ in standard position, intersecting edges, and preimage triangles and quads.}
		An intersecting edge separates the vertices of $\sigma$.
		If one is separated from the other three, its preimage is a triangle.
		If the vertices are separated into two pairs of two, the preimage is a quad.
	}
	\label{fig:standard-position-intersection}
\end{figure}

There are two special preimage triangles in $\sigma$ that we refer to as \emph{interior triangles}.
These occur as the preimages of the edges of $\sigma$ that map through $f$ across $f(\sigma)$ as in Figure \ref{fig:standard-position}, and we refer to these edges as \emph{interior edges}.
The edge of an interior triangle consist of an edge $e$ of $\sigma$, along with a pair of edges that bisect the triangles of $\sigma$ that do not contain $e$ as an edge.
An interior triangle contains two of the vertices of $\sigma$, the endpoints of $e$, and the third vertex is located in the edge of $\sigma$ opposite $e$.
Figure \ref{fig:standard-position-interior-exterior} shows one interior triangle along with its possible intersections with exterior triangles and quads.
The interior triangles of $\sigma$ always intersect in a line segment with endpoints inside of the edges of $\sigma$ that induce interior triangles, shown in Figure \ref{fig:standard-position-interior-interior}

\begin{figure}[h!]
	\begin{subfigure}[t]{0.45\textwidth}
		\caption{One interior triangle is shown, along with its intersection with an exterior triangle and an exterior quad.} \label{fig:standard-position-interior-exterior}
	\end{subfigure}
	\hfill
	\begin{subfigure}[t]{0.45\textwidth}
		\caption{Both interior triangles are shown, along with their intersection.} \label{fig:standard-position-interior-interior}
	\end{subfigure}
	
	\caption{
		\textbf{A tetrahedron $\sigma$ in standard position, interior triangles, and intersections with external triangles and quads.}
		There are two special preimage triangles in $\sigma$, called \emph{interior triangles}, that occur as the preimages of the edges of $\sigma$ that map through $f$ across $f(\sigma)$ as in Figure \ref{fig:standard-position}.
	}
	\label{fig:standard-position-interior}
\end{figure}

The triangles, quads, and intersections discussed define a subdivision of $\sigma$ into a cell complex.
%Each 3--cell of the subdivision is the preimage of a connected component of $f(\sigma)\setminus f(N^1)$, and every 2--cell that separates a pair of 3--cells inside of the subdivided $\sigma$ is the preimage of a line segment in the plane with endpoints a pair of edge crossings.
Iterating this decomposition across all tetrahedra of $N$ yields a 3--dimensional cell complex $M$.
Algorithm \ref{alg:subdividing-manifold} details the construction of $M$ from $f:N\to\RR$ in algorithmic form. 

\begin{algorithm}
	\caption{Subdividing $N$}
	\label{alg:subdividing-manifold}
	\KwData{A closed, orientable 3--manifold triangulation $N$ with subdividing map $f:N\to\RR$}
	\KwResult{A closed, orientable 3--dimensional cell complex $M$}
	\Begin{
		\ForEach{tetrahedron $\sigma$ of $N^3$}{
			\ForEach{pair of distinct edges $e_i,e_j\in N^1$, $\pd e_i \cap\pd e_j=\emptyset$}{
				\If{$f(e_i)\cap f(e_j)\neq\emptyset$ and $f(e_i)\cap f(e_j)\in f(\sigma)$}{
					Add a 0--cell to $\sigma$ everywhere that $f\inv(f(e_i)\cap f(e_j)$ intersects the 2--skeleton of $\sigma$
				}
			}
			
			
			remove $\sigma^3$ from $\sigma$
			\ForEach{interior edge $e$ of $\sigma^1$}{
				Attach  by the interior triangle given by $f\inv (f(e))\cap\sigma$\;
			}
			\ForEach{edge $e$ of $N^1\setminus\sigma^1$}{
				\If{$f(e)\cap f(\sigma)\neq \emptyset$}{
					subdivide $N$ by the exterior triangle or quad given by
					 $f\inv\big(f(e)\cap f(\sigma)\big)\cap\sigma$\;
				}
				
			}
			\ForEach{pair of edges}{foreach-block}
			
			
			for each triangle t of $N$: cut sigma with t.
			
			if f(t1) crosses f(t2) then we get 1 cells from that corssing.
		}
	}
\end{algorithm}


%Each 3--cell of $M$ maps through $f$ to a connected component of $f(N)\setminus f(N^1)$.
Let $r$ be a connected component of $f(N)\setminus f(N^1)$.
Then $f\inv(r)$ is a collection of 2-- and 3--cells in $M$ that form a  
Their is a correspondence between the 3--cells of $M$ and the connected components of $f(N)\setminus f(N^1)$, and that correspondence 

Decomposition of $\RR$ is done through $f(N_1)$.
A point in $f(N_1)$ is the image of either a vertex, exactly one edge, or exactly two edges (i.e.\ is an edge crossing), so we refer to these as the \emph{vertices}, \emph{edges}, and \emph{crossings} of the decomposition.
Because $f(N)\setminus f(N_1)$  is a disjoint collection of simply connected regions, we call the connected components of $f(N)\setminus f(N_1)$ the \emph{faces} of the decomposition.

We construct our subdivision of $N$ using the decomposition component preimages.
The preimage of a face component defines substructures analogous to face blocks, of edge components to edge blocks, and vertices and crossings to vertex blocks.
Inside of an individual tetrahedron of $N$, edge and crossing preimages are well-defined, supplying a natural subdivision of $N$ into a cell complex.
Then, the subdivision of a cell complex into a triangulation is well-defined.

The algorithm presented in this section takes as input a closed, orientable 3--manifold triangulation $N$ and a projection $f:N\to\RR$ and produces as output a closed, orientable 3--dimensional cell complex $M$ that is a subdivision of $N$.
Furthermore, the 3--cells of $M$ are partitioned into subsets that serve the same purpose as the face blocks of Chapter \ref{chapter:smooth}: attaching regions for 2--handles.
This 3--cell partitioning also induces a partition on the 2--cells of $M$ into subsets that are either interior to face blocks, or subsets that serve the same purpose as the edge blocks of Chapter ~\ref{chapter:smooth}, i.e.\ buffers between face blocks.





